{"version":3,"file":"commonHelpers.js","sources":["../src/js/footer.js"],"sourcesContent":["// Обрезка текста в поле comments\ndocument.querySelector('.footer-comment').addEventListener('input', function() {\n    const maxLength = this.cols;\n    if (this.value.length > maxLength) {\n        this.value = this.value.substring(0, maxLength - 3) + '...';\n    }\n});\n\n// Валидация при вводе данных в поле input email\ndocument.getElementById('email').addEventListener('input', function() {\n    const emailInput = this;\n    const validationMessage = document.getElementById('email-validation');\n    \n    if (emailInput.checkValidity()) {\n        emailInput.classList.remove('error');\n        emailInput.classList.add('success');\n        validationMessage.textContent = \"Success!\";\n        validationMessage.classList.remove('error');\n        validationMessage.classList.add('success');\n    } else {\n        emailInput.classList.remove('success');\n        emailInput.classList.add('error');\n        validationMessage.textContent = \"Invalid email, try again\";\n        validationMessage.classList.remove('success');\n        validationMessage.classList.add('error');\n    }\n});\n\n// Отправка формы на сервер\ndocument.querySelector('.form-btn').addEventListener('click', function(event) {\n    event.preventDefault();  // Предотвращаем отправку формы по умолчанию\n    \n    const email = document.getElementById('email').value;\n    const comment = document.getElementById('comment').value;\n\n    // Создаем объект данных\n    const data = {\n        email: email,\n        comment: comment\n    };\n\n    // Отправляем POST запрос\n    fetch('https://portfolio-js.b.goit.study/api/requests', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    })\n    .then(response => {\n        if (!response.ok) {\n            throw new Error('Server error');  // Выбрасываем ошибку если ответ не OK\n        }\n        return response.json();\n    })\n    .then(result => {\n        // Очищаем форму\n        document.querySelector('.footer-form').reset();\n\n        // Открываем модальное окно с успешным сообщением\n        showModal(result.title, result.message);\n    })\n    .catch(error => {\n        // Отображаем всплывающее сообщение об ошибке\n        showToast('Error', 'Something went wrong. Please check your input and try again.');\n    });\n});\n\n// Функция для отображения модального окна\nfunction showModal(title, message) {\n    const modal = document.createElement('div');\n    modal.classList.add('modal');\n    modal.innerHTML = `\n        <div class=\"modal-content\">\n            <button class=\"modal-close\">X\n                <svg class=\"modal-close-svg\" width=\"11\" height=\"11\">\n                    <use href=\"/src/img/icon.svg#icon-x\"></use>\n                </svg>\n            </button>\n            <h3>${title}</h3>\n            <p>${message}</p>\n        </div>\n    `;\n    document.body.appendChild(modal);\n\n    \n    // Закрытие модального окна при клике на кнопку\n    modal.querySelector('.modal-close').addEventListener('click', closeModal);\n\n    // Закрытие модального окна при клике на фон (backdrop)\n    modal.addEventListener('click', function(event) {\n        if (event.target === modal) {\n            closeModal();\n        }\n    });\n\n    // Закрытие модального окна при нажатии клавиши Escape\n    document.addEventListener('keydown', function(event) {\n        if (event.key === 'Escape') {\n            closeModal();\n        }\n    });\n\n    function closeModal() {\n        document.body.removeChild(modal);\n    }\n}\n\n// Функция для отображения всплывающего сообщения\nfunction showToast(title, message) {\n    const toast = document.createElement('div');\n    toast.classList.add('toast');\n    toast.innerHTML = `\n        <strong>${title}</strong>\n        <p>${message}</p>\n    `;\n    document.body.appendChild(toast);\n\n    // Удаляем toast через 3 секунды\n    setTimeout(() => {\n        document.body.removeChild(toast);\n    }, 3000);\n}\n"],"names":["maxLength","emailInput","validationMessage","event","email","comment","response","result","showModal","error","showToast","title","message","modal","closeModal","toast"],"mappings":"ssBACA,SAAS,cAAc,iBAAiB,EAAE,iBAAiB,QAAS,UAAW,CAC3E,MAAMA,EAAY,KAAK,KACnB,KAAK,MAAM,OAASA,IACpB,KAAK,MAAQ,KAAK,MAAM,UAAU,EAAGA,EAAY,CAAC,EAAI,MAE9D,CAAC,EAGD,SAAS,eAAe,OAAO,EAAE,iBAAiB,QAAS,UAAW,CAClE,MAAMC,EAAa,KACbC,EAAoB,SAAS,eAAe,kBAAkB,EAEhED,EAAW,iBACXA,EAAW,UAAU,OAAO,OAAO,EACnCA,EAAW,UAAU,IAAI,SAAS,EAClCC,EAAkB,YAAc,WAChCA,EAAkB,UAAU,OAAO,OAAO,EAC1CA,EAAkB,UAAU,IAAI,SAAS,IAEzCD,EAAW,UAAU,OAAO,SAAS,EACrCA,EAAW,UAAU,IAAI,OAAO,EAChCC,EAAkB,YAAc,2BAChCA,EAAkB,UAAU,OAAO,SAAS,EAC5CA,EAAkB,UAAU,IAAI,OAAO,EAE/C,CAAC,EAGD,SAAS,cAAc,WAAW,EAAE,iBAAiB,QAAS,SAASC,EAAO,CAC1EA,EAAM,eAAc,EAEpB,MAAMC,EAAQ,SAAS,eAAe,OAAO,EAAE,MACzCC,EAAU,SAAS,eAAe,SAAS,EAAE,MASnD,MAAM,iDAAkD,CACpD,OAAQ,OACR,QAAS,CACL,eAAgB,kBACnB,EACD,KAAM,KAAK,UAXF,CACT,MAAOD,EACP,QAASC,CACjB,CAQiC,CACjC,CAAK,EACA,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAM,cAAc,EAElC,OAAOA,EAAS,MACxB,CAAK,EACA,KAAKC,GAAU,CAEZ,SAAS,cAAc,cAAc,EAAE,MAAK,EAG5CC,EAAUD,EAAO,MAAOA,EAAO,OAAO,CAC9C,CAAK,EACA,MAAME,GAAS,CAEZC,EAAU,QAAS,8DAA8D,CACzF,CAAK,CACL,CAAC,EAGD,SAASF,EAAUG,EAAOC,EAAS,CAC/B,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,OAAO,EAC3BA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOJF,CAAK;AAAA,iBACNC,CAAO;AAAA;AAAA,MAGpB,SAAS,KAAK,YAAYC,CAAK,EAI/BA,EAAM,cAAc,cAAc,EAAE,iBAAiB,QAASC,CAAU,EAGxED,EAAM,iBAAiB,QAAS,SAASV,EAAO,CACxCA,EAAM,SAAWU,GACjBC,GAEZ,CAAK,EAGD,SAAS,iBAAiB,UAAW,SAASX,EAAO,CAC7CA,EAAM,MAAQ,UACdW,GAEZ,CAAK,EAED,SAASA,GAAa,CAClB,SAAS,KAAK,YAAYD,CAAK,CAClC,CACL,CAGA,SAASH,EAAUC,EAAOC,EAAS,CAC/B,MAAMG,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,OAAO,EAC3BA,EAAM,UAAY;AAAA,kBACJJ,CAAK;AAAA,aACVC,CAAO;AAAA,MAEhB,SAAS,KAAK,YAAYG,CAAK,EAG/B,WAAW,IAAM,CACb,SAAS,KAAK,YAAYA,CAAK,CAClC,EAAE,GAAI,CACX"}